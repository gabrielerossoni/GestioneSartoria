<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Gestione Sartoria - Frontend JSON</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="header-inner">
        <div class="brand">
          <svg
            class="logo"
            width="36"
            height="36"
            viewBox="0 0 24 24"
            fill="none"
            aria-hidden
          >
            <rect
              x="3"
              y="7"
              width="18"
              height="10"
              rx="2"
              fill="#fff"
              opacity="0.12"
            />
            <path
              d="M3 7c3-3 6-3 9-3s6 0 9 3v10c-3 3-6 3-9 3s-6 0-9-3V7z"
              fill="currentColor"
              opacity="0.12"
            />
          </svg>
          <h1>Gestione Sartoria</h1>
        </div>

        <div class="header-actions">
          <button
            id="themeToggle"
            class="icon-btn"
            title="Cambia tema"
            aria-label="Toggle tema"
          >
            <svg
              viewBox="0 0 24 24"
              width="20"
              height="20"
              fill="none"
              stroke="currentColor"
            >
              <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
            </svg>
          </button>
          <span class="desc">Ricevi JSON da programma C o file locale</span>
        </div>
      </div>
      <p class="sub">
        Interfaccia pronta per integrazione tramite WebSocket o chiamata
        window.receiveJson()
      </p>
    </header>

    <main>
      <section class="controls">
        <div class="file-controls">
          <label class="btn file-btn">
            <input id="fileInput" type="file" accept=".json,application/json" />
            <span>Seleziona file JSON</span>
          </label>
          <button id="downloadBtn" class="btn" disabled>Scarica JSON</button>
        </div>

        <div class="ws-controls">
          <button id="wsConnectBtn" class="btn">Connetti WebSocket</button>
          <span id="wsStatus" class="status">disconnesso</span>
        </div>
      </section>

      <section id="dropArea" class="drop-area">
        <div class="drop-inner">
          <strong>Trascina qui</strong> un file JSON oppure clicca "Seleziona
          file JSON"
          <p class="hint">
            Accetta array di ordini, liste clienti o singoli oggetti
          </p>
        </div>
      </section>

      <section class="viewers">
        <div class="viewer">
          <h2>Tabella / Struttura</h2>
          <div id="tableView" class="table-view">Nessun JSON caricato</div>
        </div>

        <div class="viewer">
          <h2>Raw JSON</h2>
          <pre id="rawView" class="raw-view">{}</pre>
        </div>
      </section>

      <section class="log">
        <h3>Log / Stato</h3>
        <pre id="logArea" class="log-area">Pronto.</pre>
      </section>
    </main>

    <footer class="site-footer">
      <small
        >Pronto a ricevere JSON. Usa window.receiveJson(obj) per iniezione
        diretta.</small
      >
    </footer>

    <script src="script.js"></script>
  </body>
</html>
