<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema di Gestione Sartoria</title>
    <!-- Emoji favicon per la scheda del browser -->
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%3E%3Ctext%20y='0.9em'%20font-size='90'%3E%F0%9F%A7%B5%3C/text%3E%3C/svg%3E"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="header">
      <h1>üßµ Sistema di Gestione Sartoria</h1>
      <p>Gestione professionale rotoli tessuto e inventario</p>
    </div>

    <!-- Barra navigazione -->
    <nav class="nav-tabs">
      <button class="tab-btn active" onclick="mostraSezione('rotoli')">
        üìã Rotoli
      </button>
      <button class="tab-btn" onclick="mostraSezione('prelievi')">
        ‚úÇÔ∏è Prelievi
      </button>
      <button class="tab-btn" onclick="mostraSezione('ritagli')">
        üß∂ Ritagli
      </button>
      <button class="tab-btn" onclick="mostraSezione('fornitori')">
        üì¶ Fornitori
      </button>
      <button class="tab-btn" onclick="mostraSezione('inventario')">
        üìä Inventario
      </button>
    </nav>

    <div class="container">
      <!-- SEZIONE ROTOLI -->
      <div id="sezione-rotoli" class="sezione active">
        <div class="card">
          <h2>‚ûï Aggiungi Rotolo</h2>
          <div class="form-grid">
            <div class="form-group">
              <label>Tipo Tessuto:</label>
              <input
                type="text"
                id="tipo"
                placeholder="es. Cotone, Seta, Lino, Lana..."
              />
            </div>
            <div class="form-group">
              <label>Colore:</label>
              <input
                type="text"
                id="colore"
                placeholder="es. Blu Navy, Rosso Bordeaux..."
              />
            </div>
            <div class="form-group">
              <label>Fantasia:</label>
              <input
                type="text"
                id="fantasia"
                placeholder="es. Rigato, Tinta Unita, Floreale..."
              />
            </div>
            <div class="form-group">
              <label>Lunghezza Totale (m):</label>
              <input
                type="number"
                id="lunghezza_totale"
                step="0.1"
                min="0"
                placeholder="es. 50.0"
              />
            </div>
            <div class="form-group">
              <label>Costo ‚Ç¨/metro:</label>
              <input
                type="number"
                id="costo"
                step="0.1"
                min="0"
                placeholder="es. 15.50"
              />
            </div>
            <div class="form-group">
              <label>Fornitore:</label>
              <input type="text" id="fornitore" placeholder="Nome fornitore" />
            </div>
            <div class="form-group">
              <label>Lotto:</label>
              <input type="text" id="lotto" placeholder="Codice lotto" />
            </div>
            <div class="form-group">
              <label>Stato:</label>
              <select id="stato">
                <option value="Disponibile">Disponibile</option>
                <option value="In uso">In uso</option>
                <option value="Esaurito">Esaurito</option>
                <option value="Riservato">Riservato</option>
              </select>
            </div>
            <div class="form-group full-width">
              <label>Note Aggiuntive:</label>
              <textarea
                id="note"
                rows="2"
                placeholder="Note opzionali..."
              ></textarea>
            </div>
          </div>
          <button class="btn-add" onclick="aggiungiRotolo()">
            ‚ûï Aggiungi Rotolo
          </button>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>üìã Elenco Rotoli</h2>
            <div class="actions">
              <input
                type="text"
                id="ricerca-rotoli"
                placeholder="üîç Cerca per tipo, colore, fornitore..."
                onkeyup="filtraRotoli()"
              />
              <button class="btn-refresh" onclick="caricaRotoli()">
                üîÑ Aggiorna
              </button>
            </div>
          </div>
          <div id="rotoli-container">
            <p class="loading">Caricamento in corso...</p>
          </div>
        </div>
      </div>

      <!-- SEZIONE PRELIEVI -->
      <div id="sezione-prelievi" class="sezione">
        <div class="card">
          <h2>‚úÇÔ∏è Registra Prelievo</h2>
          <div class="form-grid">
            <div class="form-group">
              <label>ID Rotolo:</label>
              <input
                type="text"
                id="prelievo-rotolo"
                placeholder="Inserisci ID rotolo"
              />
            </div>
            <div class="form-group">
              <label>Metraggio Prelevato (m):</label>
              <input
                type="number"
                id="metraggio"
                step="0.1"
                min="0.1"
                placeholder="es. 2.5"
              />
            </div>
            <div class="form-group">
              <label>Operatore:</label>
              <input type="text" id="operatore" placeholder="Nome operatore" />
            </div>
            <div class="form-group">
              <label>Cliente/Progetto:</label>
              <input
                type="text"
                id="cliente"
                placeholder="Nome cliente o progetto"
              />
            </div>
          </div>
          <button class="btn-add" onclick="registraPrelievo()">
            ‚úÇÔ∏è Registra Prelievo
          </button>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>üìú Storico Prelievi</h2>
            <button class="btn-refresh" onclick="caricaPrelievi()">
              üîÑ Aggiorna
            </button>
          </div>
          <div id="prelievi-container">
            <p class="loading">Caricamento in corso...</p>
          </div>
        </div>
      </div>

      <!-- SEZIONE RITAGLI -->
      <div id="sezione-ritagli" class="sezione">
        <div class="card">
          <div class="card-header">
            <h2>üß∂ Gestione Ritagli</h2>
            <div class="info-box">
              <p>
                <strong>Riutilizzabili:</strong> ‚â• 0.50 m |
                <strong>Scarti:</strong> &lt; 0.30 m
              </p>
            </div>
          </div>
          <div class="stats-grid">
            <div class="stat-card">
              <h3>Ritagli Riutilizzabili</h3>
              <p class="stat-value" id="ritagli-riutilizzabili">0</p>
            </div>
            <div class="stat-card">
              <h3>Scarti da Eliminare</h3>
              <p class="stat-value" id="scarti-totali">0</p>
            </div>
            <div class="stat-card">
              <h3>Metraggio Recuperabile</h3>
              <p class="stat-value" id="metraggio-recuperabile">0 m</p>
            </div>
          </div>
          <div id="ritagli-container">
            <p class="loading">Caricamento in corso...</p>
          </div>
        </div>
      </div>

      <!-- SEZIONE FORNITORI -->
      <div id="sezione-fornitori" class="sezione">
        <div class="card">
          <h2>üì¶ Aggiungi Fornitore</h2>
          <div class="form-grid">
            <div class="form-group">
              <label>Nome Fornitore:</label>
              <input
                type="text"
                id="nome-fornitore"
                placeholder="Nome completo"
              />
            </div>
            <div class="form-group">
              <label>Partita IVA:</label>
              <input type="text" id="piva" placeholder="IT00000000000" />
            </div>
            <div class="form-group">
              <label>Telefono:</label>
              <input type="tel" id="telefono" placeholder="+39 000 0000000" />
            </div>
            <div class="form-group">
              <label>Email:</label>
              <input
                type="email"
                id="email-fornitore"
                placeholder="email@fornitore.it"
              />
            </div>
            <div class="form-group full-width">
              <label>Indirizzo:</label>
              <input type="text" id="indirizzo" placeholder="Via, Citt√†, CAP" />
            </div>
          </div>
          <button class="btn-add" onclick="aggiungiForniore()">
            üì¶ Aggiungi Fornitore
          </button>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>üìã Elenco Fornitori</h2>
            <button class="btn-refresh" onclick="caricaFornitori()">
              üîÑ Aggiorna
            </button>
          </div>
          <div id="fornitori-container">
            <p class="loading">Caricamento in corso...</p>
          </div>
        </div>
      </div>

      <!-- SEZIONE INVENTARIO -->
      <div id="sezione-inventario" class="sezione">
        <div class="card">
          <h2>üìä Riepilogo Inventario</h2>
          <div class="stats-grid">
            <div class="stat-card">
              <h3>Totale Rotoli</h3>
              <p class="stat-value" id="totale-rotoli">0</p>
            </div>
            <div class="stat-card">
              <h3>Metraggio Totale</h3>
              <p class="stat-value" id="metraggio-totale">0 m</p>
            </div>
            <div class="stat-card">
              <h3>Valore Totale</h3>
              <p class="stat-value" id="valore-totale">‚Ç¨ 0.00</p>
            </div>
            <div class="stat-card">
              <h3>Rotoli Disponibili</h3>
              <p class="stat-value" id="rotoli-disponibili">0</p>
            </div>
          </div>

          <div class="chart-container">
            <h3>üìà Distribuzione per Tipo</h3>
            <canvas id="chart-tipi"></canvas>
          </div>

          <div class="export-section">
            <button class="btn-export" onclick="esportaCSV()">
              üìÑ Esporta CSV
            </button>
            <button class="btn-export" onclick="stampaReport()">
              üñ®Ô∏è Stampa Report
            </button>
            <button class="btn-export" onclick="backupDati()">
              üíæ Backup Dati
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer">
      <p>
        Sistema di Gestione Sartoria v1.0 | Sviluppato da
        <strong>Gabriele Rossoni & Marcello Patrini</strong> - ITIS Crema
      </p>
    </footer>

    <script src="app.js"></script>
  </body>
</html>
